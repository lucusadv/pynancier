import random

def rotate(x, shift, base):
	if shift >= 0:
		if x + shift < base:
			x=x+shift
		else:
			x=x+shift-base
	else:
		if x + shift >= 0:
			x=x+shift
		else:
			x=x+shift+base
	return(x)


def encr(f, seed=31459):
	random.seed(seed)
	out=''
	for n in f:
		r=random.randrange(0,31)
		n2 = rotate(ord(n)-32, r, 96) + 32
		out=out + chr(n2)
	return(out)

def decr(f, seed=31459):
	random.seed(seed)
	out=''
	for n in f:
		tmp=ord(n)-random.randrange(0, 31)
		tmp+=(tmp<0)*127
		m=chr(tmp)
		out=out + m
	return(out)


if __name__ == '__main__':
	s=''.join([chr(x) for x in range(20,127)])
	check=[decr(encr(s, seed=x), seed=x)==s for x in random.sample(range(2**10), 1000)]
	print('check passed: ', all(check))
	
